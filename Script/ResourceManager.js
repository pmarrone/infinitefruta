function ResourceContainer() {   //var _self = this;   var _resourcesLoaded = 0;   var _resourcesAdded = 0;   var _onLoadDonePointer;   var _onLoadingPointer;   this.Add = function (imagePath) {	   var img = new Image();	   _resourcesAdded++;	   var loadListner = function () {		   img.removeEventListener('load', loadListner);		   _resourcesLoaded++;		   if (_onLoadingPointer) {			   _onLoadingPointer(_resourcesLoaded, _resourcesAdded);		   }		   if (_resourcesLoaded === _resourcesAdded) {			   _onLoadDonePointer();		   }	   }	   img.addEventListener('load', loadListner);	   img.src = imagePath;	   return img;   }   this.Loading = function (dispatcher) {	   _onLoadingPointer = dispatcher;   }   this.Loaded = function (dispatcher) {	   _onLoadDonePointer = dispatcher;	   if (_resourcesLoaded === _resourcesAdded) {		   _onLoadDonePointer();	   }   }}//var canvas = document.getElementById("canvas");//var context = canvas.getContext("2d");var resourceContainer = new ResourceContainer();resourceContainer.Loading(function (done, total) {   context.fillStyle = "rgb(0,0,0)";   context.fillRect(0, 0, canvas.width, canvas.height);});//    var cow = resourceContainer.Add("cow.jpg");//    var martian = resourceContainer.Add("marvin.jpg");resourceContainer.Loaded(function () {   //Start game logic here//   context.drawImage(cow, 0, 0);});